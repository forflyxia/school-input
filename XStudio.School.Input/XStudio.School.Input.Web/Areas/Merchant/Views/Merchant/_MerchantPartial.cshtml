
<!--/************************************************************************************************************************************************
 * FileName:       DbContext.cs
 * Author:         hbxia
 * Description:    this is auto genetated, don't change!
*************************************************************************************************************************************************/-->

@model XStudio.School.Input.Model.Merchant.MerchantModel

<form class="form-inline" role="form" id="my-form-search" action="javascript:void(0)">
    <div class="form-group">
        @Html.LabelFor(m => m.Id, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Id, new { @class = "form-control my-input-searchcondition", placeholder = "请输入主键" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Name, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Name, new { @class = "form-control", placeholder = "请输入商户名称" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Shortname, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Shortname, new { @class = "form-control", placeholder = "请输入商户短名称" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Branch, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Branch, new { @class = "form-control", placeholder = "请输入商户分店" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Logo, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Logo, new { @class = "form-control", placeholder = "请输入商户logo" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Introduction, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Introduction, new { @class = "form-control", placeholder = "请输入简介" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Contact, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Contact, new { @class = "form-control", placeholder = "请输入联系人" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Telphone, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Telphone, new { @class = "form-control", placeholder = "请输入电话" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Mobliephone, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Mobliephone, new { @class = "form-control", placeholder = "请输入手机" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Businesslicence, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Businesslicence, new { @class = "form-control", placeholder = "请输入营业执照" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Legalperson, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Legalperson, new { @class = "form-control", placeholder = "请输入法人" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.DistrictId, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.DistrictId, new { @class = "form-control my-input-searchcondition", placeholder = "请输入所属行政区" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Address, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Address, new { @class = "form-control", placeholder = "请输入地址" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Longitude, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Longitude, new { @class = "form-control my-input-searchcondition", placeholder = "请输入经度" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Latitude, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Latitude, new { @class = "form-control my-input-searchcondition", placeholder = "请输入纬度" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Cash, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Cash, new { @class = "form-control my-input-searchcondition", placeholder = "请输入现金" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Point, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Point, new { @class = "form-control my-input-searchcondition", placeholder = "请输入积分" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Status, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Status, new { @class = "form-control my-input-searchcondition", placeholder = "请输入状态" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Createtime, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Createtime, new { @class = "form-control my-input-searchcondition my-input-datepicker", placeholder = "请输入" })
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Updatetime, new { @class = "sr-only" })
        @Html.TextBoxFor(m => m.Updatetime, new { @class = "form-control my-input-searchcondition my-input-datepicker", placeholder = "请输入" })
    </div>
    <button type="submit" class="btn btn-default my-btn-search">查询</button>
</form>

<a class="btn btn-primary" href="/merchant/Merchant/ViewMerchant?id=0" target="_blank" role="button">新增</a>

<table id="tableMerchant" class="table table-bordered table-hover dataTable" role="grid" aria-describedby="example2_info">
    <thead>
    <tr role="row">
        <th class="sorting_asc" data-data="Id" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">主键</th>
        <th class="sorting_asc" data-data="Name" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">商户名称</th>
        <th class="sorting_asc" data-data="Shortname" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">商户短名称</th>
        <th class="sorting_asc" data-data="Branch" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">商户分店</th>
        <th class="sorting_asc" data-data="Logo" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">商户logo</th>
        <th class="sorting_asc" data-data="Introduction" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">简介</th>
        <th class="sorting_asc" data-data="Contact" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">联系人</th>
        <th class="sorting_asc" data-data="Telphone" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">电话</th>
        <th class="sorting_asc" data-data="Mobliephone" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">手机</th>
        <th class="sorting_asc" data-data="Businesslicence" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">营业执照</th>
        <th class="sorting_asc" data-data="Legalperson" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">法人</th>
        <th class="sorting_asc" data-data="DistrictId" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">所属行政区</th>
        <th class="sorting_asc" data-data="Address" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">地址</th>
        <th class="sorting_asc" data-data="Longitude" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">经度</th>
        <th class="sorting_asc" data-data="Latitude" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">纬度</th>
        <th class="sorting_asc" data-data="Cash" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">现金</th>
        <th class="sorting_asc" data-data="Point" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">积分</th>
        <th class="sorting_asc" data-data="Status" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending">状态</th>
        <th class="sorting_asc" data-data="Createtime" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending"></th>
        <th class="sorting_asc" data-data="Updatetime" tabindex="0" rowspan="1" colspan="1" aria-sort="ascending"></th>
        <th class="sorting" tabindex="0" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">操作</th>
    </tr>
    </thead>
</table>

<script>
    $(function () {
        $.clearSearchCondition(".my-input-searchcondition");
        var tables = $('#tableMerchant').DataTable({
            ajax: {
                url: $.fn.dataTable.defaults.virtualDir + 'merchant/Merchant/MerchantsByPaging',
                data: function (data) {
                    data.CustomFilterParameters = $("#my-form-search").serializeArray();
                    var json = JSON.stringify(data);
                    return json;
                }
            },
            columnDefs: [
            {
                targets: -1,
                width: "100px",
                render: function (data, type, full, meta) {
                    var json = JSON.stringify(full);
                    var html = '';
                    var url = $.fn.dataTable.defaults.virtualDir + 'merchant/Merchant/ViewMerchant?id=' + full.Id;
                    html = '<a class="btn btn-default" href="' + url + '" target="_blank" role="button">查看</a>';
                    var product_producturl = $.fn.dataTable.defaults.virtualDir + 'product/Product/ProductIndex?MerchantId=' + full.Id;
                    html+='<a class="btn btn-default" href="' + product_producturl + '" target="_blank" role="button">商户产品</a>';
                    var order_orderurl = $.fn.dataTable.defaults.virtualDir + 'order/Order/OrderIndex?MerchantId=' + full.Id;
                    html+='<a class="btn btn-default" href="' + order_orderurl + '" target="_blank" role="button">商户订单</a>';
                    var merchant_merchant_custom_categoryurl = $.fn.dataTable.defaults.virtualDir + 'merchant/MerchantCustomCategory/MerchantCustomCategoryIndex?MerchantId=' + full.Id;
                    html+='<a class="btn btn-default" href="' + merchant_merchant_custom_categoryurl + '" target="_blank" role="button">商户类别</a>';
                    var merchant_merchant_imageurl = $.fn.dataTable.defaults.virtualDir + 'merchant/MerchantImage/MerchantImageIndex?MerchantId=' + full.Id;
                    html+='<a class="btn btn-default" href="' + merchant_merchant_imageurl + '" target="_blank" role="button">商户图片</a>';
                    var promotion_promotionurl = $.fn.dataTable.defaults.virtualDir + 'promotion/Promotion/PromotionIndex?MerchantId=' + full.Id;
                    html+='<a class="btn btn-default" href="' + promotion_promotionurl + '" target="_blank" role="button">商户促销</a>';
                    var merchant_merchant_messageurl = $.fn.dataTable.defaults.virtualDir + 'merchant/MerchantMessage/MerchantMessageIndex?MerchantId=' + full.Id;
                    html+='<a class="btn btn-default" href="' + merchant_merchant_messageurl + '" target="_blank" role="button">商户消息</a>';
                    
                    return html;
                }
            }
            ]
        });
        $(".my-btn-search").on("click", function () {
            tables.draw();
        });
    });
</script>
